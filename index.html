<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Time Capsule</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C!-- Background --%3E%3Crect width='100' height='100' fill='%2380ed99'/%3E%3C!-- Capsule Shape --%3E%3Cpath d='M50,10c-16.6,0-30,13.4-30,30v20c0,16.6,13.4,30,30,30s30-13.4,30-30V40C80,23.4,66.6,10,50,10z' fill='%23006d5b'/%3E%3C!-- Time Symbol (Hourglass or Clock) --%3E%3Cg transform='translate(50,50) scale(0.6)'%3E%3C!-- Hourglass (Simple) --%3E%3Cpath d='M0,-25v-10h10v10l-5,8L-5,-35v10z M-15,-35h30v70h-30z M0,5c-5.5,0-10,4.5-10,10s4.5,10,10,10s10-4.5,10-10S5,5,0,5z' fill='%23ffe599'/%3E%3C/g%3E%3C/svg%3E" type="image/svg+xml" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Bitcoin Time Capsule</h1>
        <p>A decentralized contract allowing users to store encrypted messages on <strong>Bitcoin Signet</strong>, retrievable only after a future block height.</p>

        <h2>🚨 Important Notice: Signet BTC Only!</h2>
        <p>
            This contract operates on <strong>Bitcoin Signet (testnet)</strong>, meaning you are <strong>NOT spending real BTC</strong>.
            Instead, you use **Signet BTC**, which has no monetary value. You can request free Signet BTC from a faucet below.
        </p>
        <p>➡ <a href="https://signetfaucet.com/" target="_blank">Bitcoin Signet Faucet</a></p>

        <h2>🔹 Enable Signet in Your Wallet</h2>
        <p>
            To interact with the contract, switch your wallet to **Signet Mode**:<br>
            ✅ **Unisat Wallet:** Go to settings → Select "Network" → Enable **Signet**.<br>
            ✅ **Xverse Wallet:** Open the app → Go to network settings → Switch to **Signet**.<br>
            ✅ **Other Wallets:** Check if your wallet supports Bitcoin Signet and configure it in network settings.
        </p>

        <h2>📌 What is TimeCapsuleContract?</h2>
        <p>
            TimeCapsuleContract is a **blockchain-based message vault** that lets users store encrypted messages on Bitcoin Signet.
            These messages remain locked until a **specific future block height** is reached.
            Once the unlocking time arrives, the first participant to decode and retrieve the hidden message receives **50% of the collected interaction fees**.
        </p>

        <h2>💰 Transaction Fees & Payment Details</h2>
        <p>
            To store a message in the Bitcoin Time Capsule, you need to pay a small network fee of **0.0001 Signet BTC**.
            This fee ensures that your message is securely recorded on the blockchain.
        </p>

        <ul>
            <li>✅ **Storage Fee:** 0.0001 Signet BTC (paid during transaction).</li>
            <li>✅ **Total Transaction Cost:** Your network fee + storage fee.</li>
            <li>✅ **Where the Fee Goes:** 25% is distributed to the first unlocker, 15% to the second, and 10% to the third unlocker. The remaining 40% supports contract operation.</li>
        </ul>

        <h2>🔄 How the Process Works</h2>
        <ol>
            <li><strong>Connect your Bitcoin Signet wallet</strong> (Unisat/Xverse).</li>
            <li><strong>Enter a message</strong> → Encrypts locally in your browser.</li>
            <li><strong>Sign the transaction</strong> inside your wallet.</li>
            <li><strong>Broadcast the transaction manually</strong> to Bitcoin Signet.</li>
            <li>🔐 **After 21 days**, the contract unlocks, and users can retrieve the hidden messages.</li>
            <li>🏆 The first user to unlock the message receives **50% of the fees**.</li>
        </ol>

        <button id="connectWallet">Connect Wallet (Unisat/Xverse)</button>
        <p id="walletStatus">Wallet Status: Not Connected</p>

        <h2>✉ Store Your Message</h2>
        <textarea id="message" placeholder="Write your message here..."></textarea>
        <button onclick="encryptMessage()">Encrypt & Generate Transaction</button>

        <h2>🔒 Encrypted Message</h2>
        <p id="encryptedMessageOutput"></p>

        <h2>📜 Transaction Data</h2>
        <p id="output"></p>

        <button id="signTransaction" style="display:none;">Sign & Submit</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
