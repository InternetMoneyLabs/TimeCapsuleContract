<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Time Capsule</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="stylesheet" href="styles.css">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline';">
</head>
<body>
    <div class="container">
        <h1>Bitcoin Time Capsule</h1>
        <p>A decentralized contract allowing users to store encrypted messages on <strong>Bitcoin Signet</strong>, retrievable only after a future block height.</p>

        <h2>🚨 Important Notice: Signet BTC Only!</h2>
        <p>
            This contract operates on <strong>Bitcoin Signet (testnet)</strong>, meaning you are <strong>NOT spending real BTC</strong>.
            Instead, you use **Signet BTC**, which has no monetary value. You can request free Signet BTC from a faucet below.
        </p>
        <p>➡ <a href="https://signetfaucet.com/" target="_blank">Bitcoin Signet Faucet</a></p>

        <h2>🔹 Enable Signet in Your Wallet</h2>
        <p>
            To interact with the contract, switch your wallet to **Signet Mode**:<br>
            ✅ **Unisat Wallet:** Go to settings → Select "Network" → Enable **Signet**.<br>
        </p>

        <h2>📌 What is TimeCapsuleContract?</h2>
        <p>
            TimeCapsuleContract is a **blockchain-based message vault** that lets users store encrypted messages on Bitcoin Signet.
            These messages remain locked until a **specific future block height** is reached.
            Once the unlocking time arrives, the first participant to decode and retrieve the hidden message receives **50% of the collected interaction fees**.
        </p>

        <h2>💰 Transaction Fees & Payment Details</h2>
        <p>
            To store a message in the Bitcoin Time Capsule, you need to pay a small network fee of **0.0001 Signet BTC**.
            This fee ensures that your message is securely recorded on the blockchain.
        </p>

        <ul>
            <li>✅ **Storage Fee:** 0.0001 Signet BTC (paid during transaction).</li>
            <li>✅ **Total Transaction Cost:** Your network fee + storage fee.</li>
            <li>✅ **Where the Fee Goes:** 25% is distributed to the first unlocker, 15% to the second, and 10% to the third unlocker. The remaining 40% supports contract operation.</li>
        </ul>

        <h2>🔄 How the Process Works</h2>
        <ol>
            <li><strong>Connect your Bitcoin Signet wallet</strong> (Unisat).</li>
            <li><strong>Enter a message</strong> → Encrypts locally in your browser.</li>
            <li><strong>Sign the transaction</strong> inside your wallet.</li>
            <li><strong>Broadcast the transaction manually</strong> to Bitcoin Signet.</li>
            <li>🔐 **After 21 days**, the contract unlocks, and users can retrieve the hidden messages.</li>
            <li>🏆 The first user to unlock the message receives **50% of the fees**.</li>
        </ol>

        <button id="connectWallet">Connect Wallet (Unisat)</button>
        <p id="walletStatus">Wallet Status: Not Connected</p>

        <h2>✉ Store Your Message</h2>
        <textarea id="message" placeholder="Write your message here..."></textarea>
        <button onclick="encryptMessage()">Encrypt & Generate Transaction</button>

        <h2>🔒 Encrypted Message</h2>
        <p id="encryptedMessageOutput"></p>

        <h2>📜 Transaction Data</h2>
        <p id="output"></p>

        <button id="signTransaction" style="display:none;">Sign & Submit</button>

        <p>
            <strong>Note:</strong> If you see warnings in the browser console related to <code>eternl-dom-script</code>, they are caused by the Eternl wallet extension and do not affect the functionality of this site.
        </p>
    </div>

    <script src="script.js"></script>
</body>
</html>